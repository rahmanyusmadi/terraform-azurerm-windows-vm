{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "type": "String",
    },
    "virtualMachineName": {
      "type": "String",
    },
    "autoShutdownStatus": {
      "type": "String",
    },
    "autoShutdownTime": {
      "type": "String",
    },
    "autoShutdownTimeZone": {
      "type": "String",
    },
  },
  "resources": [
    {
      "type": "Microsoft.DevTestLab/schedules",
      "apiVersion": "2017-04-26-preview",
      "name": "[concat('shutdown-computevm-', parameters('virtualMachineName'))]",
      "location": "[parameters('location')]",
      "dependsOn": [
          "[concat('Microsoft.Compute/virtualMachines/', parameters('virtualMachineName'))]"
      ],
      "properties": {
          "status": "[parameters('autoShutdownStatus')]",
          "taskType": "ComputeVmShutdownTask",
          "dailyRecurrence": {
            "time": "[parameters('autoShutdownTime')]"
          },
          "timeZoneId": "[parameters('autoShutdownTimeZone')]",
          "targetResourceId": "[resourceId('Microsoft.Compute/virtualMachines', parameters('virtualMachineName'))]",
      }
    }
  ]
}